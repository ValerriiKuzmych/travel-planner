<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Trip Details</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h1 th:text="'Trip: ' + ${trip.city}"></h1>

<div class="mb-3">
    <p><strong>Start date:</strong> <span th:text="${trip.startDate}"></span></p>
    <p><strong>End date:</strong> <span th:text="${trip.endDate}"></span></p>
</div>

<div class="mb-3">
    <a th:href="@{/trips/{id}/edit(id=${trip.id})}" class="btn btn-primary">Edit</a>
    <form th:action="@{/trips/{id}/delete(id=${trip.id})}" method="post" style="display:inline;">
        <button class="btn btn-danger" type="submit">Delete</button>
    </form>
    <a th:href="@{/trips}" class="btn btn-secondary">Back</a>
</div>

<hr>

<h2>Activities</h2>

<div th:if="${trip.activitiesByDate.isEmpty()}">
    <p>No activities yet</p>
</div>

<div th:each="entry : ${trip.activitiesByDate}">
    <h4 th:text="${entry.key}"></h4>

    <ul class="list-group mb-3">
        <li th:each="act : ${entry.value}" class="list-group-item">
            <span th:text="${act.startTime}"></span>
            -
            <span th:text="${act.endTime}"></span>
            :
            <strong th:text="${act.name}"></strong>

            <a class="btn btn-sm btn-outline-primary float-end"
               th:href="@{/trips/{tripId}/activities/{actId}/edit(tripId=${trip.id},actId=${act.id})}">Edit</a>
        </li>
    </ul>
</div>

<a th:href="@{/trips/{tripId}/activities/create(tripId=${trip.id})}">Create Activity</a>

</body>
</html>