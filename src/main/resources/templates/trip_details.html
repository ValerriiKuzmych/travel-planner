<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Trip Details</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h1 th:text="'Trip: ' + ${trip.city}"></h1>

<div class="mb-3">
    <p><strong>Start date:</strong> <span th:text="${trip.startDate}"></span></p>
    <p><strong>End date:</strong> <span th:text="${trip.endDate}"></span></p>
</div>

<div class="mb-3">
    <a th:href="@{'/trips/' + ${trip.id} + '/edit'}" class="btn btn-primary">Edit</a>

    <a th:href="@{'/trips/' + ${trip.id} + '/delete'}"
       class="btn btn-danger"
       onclick="return confirm('Delete this trip?')">Delete</a>

    <a th:href="@{'/trips'}" class="btn btn-secondary">Back</a>
</div>

<hr>

<h2>Activities</h2>

<div th:if="${trip.activitiesByDate.isEmpty()}">
    <p>No activities yet</p>
</div>

<div th:each="entry : ${trip.activitiesByDate}">
    <h4 th:text="${entry.key}"></h4>

    <ul class="list-group mb-3">
        <li th:each="act : ${entry.value}" class="list-group-item">
            <span th:text="act.startTime"></span>
            -
            <span th:text="act.endTime"></span>
            :
            <strong th:text="act.name"></strong>

            <a class="btn btn-sm btn-outline-primary float-end"
               th:href="@{'/activities/' + ${act.id} + '/edit'}">Edit</a>
        </li>
    </ul>
</div>

<a th:href="@{'/activities/new?tripId=' + ${trip.id}}" class="btn btn-success">
    + Add Activity
</a>

</body>
</html>