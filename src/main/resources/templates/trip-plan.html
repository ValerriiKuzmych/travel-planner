<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::content})}">

<div th:fragment="content">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0" th:text="'Trip Plan — ' + ${plan.city}"></h2>

        <div>
            <a th:href="@{/trips/{id}/plan/pdf(id=${plan.tripId})}"
               class="btn btn-outline-primary me-2"
               target="_blank">
                Export PDF
            </a>

            <a th:href="@{/trips/{id}(id=${plan.tripId})}"
               class="btn btn-outline-secondary">
                Back to Trip
            </a>
        </div>
    </div>


    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <p class="mb-1">
                <strong>Start date:</strong>
                <span th:text="${plan.startDate}"></span>
            </p>
            <p class="mb-0">
                <strong>End date:</strong>
                <span th:text="${plan.endDate}"></span>
            </p>
        </div>
    </div>


    <div class="mb-5">
        <h4 class="mb-3">Weather Forecast</h4>

        <div th:if="${plan.weatherLimited}">
            <div class="alert alert-secondary">
                Weather forecast is available only for the next few days.
            </div>
        </div>

        <div th:each="dayEntry : ${plan.weather}"
             class="mb-4">

            <h6 class="text-muted mb-2"
                th:text="${dayEntry.key}">
            </h6>

            <div class="card shadow-sm">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"
                        th:each="t : ${dayEntry.value.times}">

                        <strong th:text="${t.time}"></strong>
                        —
                        <span th:text="${t.temperature} + '°C'"></span>,
                        <span th:text="${t.description}"></span>

                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div>
        <h4 class="mb-3">Activities</h4>

        <div th:if="${plan.activities.isEmpty()}">
            <div class="alert alert-secondary">
                No activities planned.
            </div>
        </div>

        <div th:each="activityEntry : ${plan.activities}"
             class="mb-4">

            <h6 class="text-muted mb-2"
                th:text="${activityEntry.key}">
            </h6>

            <div class="card shadow-sm">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"
                        th:each="a : ${activityEntry.value}">

                        <strong th:text="${a.startTime}"></strong>
                        —
                        <span th:text="${a.name}"></span>

                    </li>
                </ul>
            </div>
        </div>
    </div>

</div>
</html>




