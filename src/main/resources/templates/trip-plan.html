<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Trip Plan — ' + ${plan.city}"></title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</head>
<body class="bg-light">

<div class="container py-4">

    <h1 class="mb-4" th:text="'Trip Plan for ' + ${plan.city}"></h1>


    <div class="card mb-4">
        <div class="card-body">
            <p><strong>City:</strong> <span th:text="${plan.city}"></span></p>
            <p><strong>Start date:</strong> <span th:text="${plan.startDate}"></span></p>
            <p><strong>End date:</strong> <span th:text="${plan.endDate}"></span></p>
        </div>
    </div>


    <h2 class="mb-3">Weather Forecast</h2>

    <div th:if="${#maps.isEmpty(plan.weather)}"
         class="alert alert-warning">
        Weather forecast is available only for the next 5 days
        and will appear closer to the start date.
    </div>


    <div class="mb-4" th:each="dayEntry : ${plan.weather}">
        <div class="card shadow-sm mb-3">
            <div class="card-body">
                <h5 th:text="${dayEntry.key}"></h5>

                <ul class="list-group list-group-flush"
                    th:each="w : ${dayEntry.value.times}">
                    <li class="list-group-item">
                        <strong th:text="${w.time}"></strong>
                        —
                        <span th:text="${#numbers.formatDecimal(w.temperature,1,1)} + ' °C'"></span>,
                        <span th:text="${w.description}"></span>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <h2 class="mt-5 mb-3">Activities</h2>

    <div class="mb-4" th:each="activityEntry : ${plan.activities}">
        <h4 th:text="${activityEntry.key}"></h4>

        <ul class="list-group mb-3">
            <li class="list-group-item"
                th:each="a : ${activityEntry.value}">
                <strong th:text="${a.startTime}"></strong>
                &nbsp;–&nbsp;
                <span th:text="${a.name}"></span>
            </li>
        </ul>
    </div>
    <a th:href="@{/trips/{id}(id=${plan.tripId})}">Back to Trip</a>
</div>

</body>
</html>



